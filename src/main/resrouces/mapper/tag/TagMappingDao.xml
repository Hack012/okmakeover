<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC
        "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="net.okjsp.tag.dao.TagMappingDao">

    <select id="selectList" resultType="net.okjsp.tag.model.TagMapping">
        /* 태그 매핑 목록 조회 */
        select board_id
              ,write_no
              ,tag_name
          from 13_t_tagmapping
         where board_id = #{boardId}
           and tag_name = #{tagName}
         order by ${sort} desc
         limit #{offset}, #{sizePerList}
    </select>

    <select id="selectTotalCount" resultType="java.lang.Integer">
        /* 태그 매핑 개수 조회 */
        select count(boardId) count
          from 13_t_tagmapping
         where board_id = #{boardId}
           and tag_name = #{tagName}
    </select>

    <select id="selectOne" resultType="net.okjsp.tag.model.TagMapping">
        /* 태그 매핑 조회 */
        select board_id
              ,write_no
              ,tag_name
          from 13_t_tagmapping
         where board_id = #{boardId}
           and write_no = #{writeNo}
           and tag_name = #{tagName}
    </select>

    <insert id="insert">
        /* 태그 매핑 저장 */
        insert into 13_t_tagmapping (
             board_id
            ,write_no
            ,tag_name
        ) values (
             #{boardId}
            ,#{writeNo}
            ,#{tagName}
        )
    </insert>

    <update id="update">
        /* 태그 매핑 수정 */
        update 13_t_tagmapping
           set tag_name = #{tagName}
         where board_id = #{boardId}
           and write_no = #{writeNo}
    </update>

    <delete id="delete">
        /* 태그 매핑 삭제 */
        delete
          from 13_t_tagmapping
         where board_id = #{boardId}
           and write_no = #{writeNo}
    </delete>

</mapper>