<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC
        "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="net.okjsp.recommendation.dao.RecommendationDao">

	<select id="selectRecommendations" resultType="net.okjsp.recommendation.model.Recommendation">
		select
			board_id, write_no, comment_id, guboon_id, 
			user_id, score, recommendation_date
		from 
			from 13_t_recommendation
		where board_id = #{boardId}
		  and write_no = #{writeNo}
		  and comment_id = #{commentId}
		order by recommendation_date asc
	</select>

    <select id="selectRecommendationsByGuboon" resultType="net.okjsp.recommendation.model.Recommendation">
    	select
			board_id, write_no, comment_id, guboon_id, 
			user_id, score, recommendation_date
		from 
			from 13_t_recommendation
		where board_id = #{boardId}
		  and write_no = #{writeNo}
		  and comment_id = #{commentId}
		  and guboon_id = #{guboonId}
		order by recommendation_date asc
    </select>

    <select id="selectRecommendationsByUser" resultType="net.okjsp.tag.model.Tag">
    	select
			board_id, write_no, comment_id, guboon_id, 
			user_id, score, recommendation_date
		from 
			from 13_t_recommendation
		where user_id = #{userId}
		order by recommendation_date asc
    </select>
    
     <select id="selectCountByGuboon" resultType="java.lang.Integer">
     	select
			count(guboon_id) as cnt
		from 
			from 13_t_recommendation
		where board_id = #{boardId}
		  and write_no = #{writeNo}
		  and comment_id = #{commentId}
		  and guboon_id = #{guboonId}
		order by recommendation_date asc
    </select>

    <insert id="insert">
    	insert into 13_t_recommendation (
    		board_id, 
    		write_no, 
    		comment_id, 
    		guboon_id, 
    		user_id, 
    		score, 
    		recommendation_date
    	) values (
    		#{boardId}, 
    		#{writeNo}, 
    		#{commentId}, 
    		#{guboonId}, 
    		#{userId}, 
    		#{score}, 
    		#{recommendationDate}
    	)
    </insert>
    <delete id="delete">
    	delete from 
			from 13_t_recommendation
		where board_id = #{boardId}
		  and write_no = #{writeNo}
		  and comment_id = #{commentId}
		  and guboon_id = #{guboonId}
		  and user_id = #{userId}
    </delete>

</mapper>